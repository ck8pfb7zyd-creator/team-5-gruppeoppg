<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>

        body { 
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial; 
        }

        h1 {
            text-align: center;
            font-size: 40px;
            background: linear-gradient(90deg, #4da6ff, #ff7eb3);
            -webkit-background-clip: text;
            color: transparent; 
            margin-bottom: 5px;
        }

        h2 { 
            text-align: center;
            font-size: 18px;
            color: #4da6ff;
            margin-top: 0px;
        }

        #tekstBox {
            text-align: center; 
        }

        .img {
            width: 300px;
            height: 300px;
            object-fit: contain;    
        }
        
        .container {
            width: 200px;
            height: 20px;
            border: 2px solid black;
        }

        .bar{
            height:100%;
            width: 100%;
            background-color: green;
            transition: width 0.1s linear;
        }
        
        .buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .buttons button {
            padding: 10px 16px;
            border: none;
            border-radius: 12px; 

            background-color: #4da6ff; 
            color: white; 
            font-weight: bold;
            
            cursor: pointer; 
            
            transition: transform 0.15s ease; 
            box-shadow: 0.15s ease;
            
            box-shadow: 0px 4px 0px #2d79c7; 
        }

        .buttons button:hover {
            box-shadow: 0px 6px 0px #2d79c7; 
        }
        
        .buttons button:active {
            transform: translateY(2px); 
            box-shadow: 0px 2px 0px #2d79c7; 
        }
        
        .center {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
    </style>
</head>
<body>
  
    <div id="tekstBox"></div> 

    <script> 


        // models

        //spill 
        let animal = 'katt.png';
        let name = 'Gotchi';

        // Behov for √• leve
        let stamina = 100;
        let animalLife = 9;
        let sleep = 100;
        let sult = 100;
    
        
      
        let gameInfo = ''; 
        

        // barcolors, hver bar sin farge er uavhengig.            
        let barcolor = 'green';
        let barstamina = 'green';
        let barsult = 'green';
        
        
        
       //Views 

      updateView()


        // Lager selve spillet hver gang funksjonen blir brukt
        function updateView(){

            sleepState();
            t√∏rstState();
            hungerstate();
            animalState();

            document.getElementById('tekstBox').innerHTML = `
            <h1>${name} Guardian</h1>
            <h2>Hold Gotchi lykkeligü©µ</h2>
            
           <img class="img" src="${animal}">
           <div class="center"> ${drawStats()}</div>     
           <div class="center">${drawButtons()}</div>
            
            <p>${gameInfo}</p>
            `;
        }


        // endrer bilde av gotchi basert p√• behov
        function sleepState(){

            if (sleep < 50){
                barcolor = "orange";
            }
            
            else if (sleep < 20){

                barcolor = "red";
            }
            else{
                barcolor = "green";

            }
        }

        function t√∏rstState(){
        
            if(stamina < 25){
                barstamina = "red";
                }
                
            else if(stamina < 65){
                barstamina = "orange";
                }

            else{
                barstamina = "green";
            }    
         }


        function hungerstate(){
        
            if(sult < 30){
                barsult = "red";
            }

            else if(sult < 70){
                barsult = "orange";
                }

            else{
                barsult = "green";
            }
         }


         function animalState(){
            if (animalLife <= 0) {
             animal = "d√∏dkatt.png";

            } else if (sult < 70) {
             animal = "sultenkkatt.png";

            } else if (stamina < 65) {
             animal = "t√∏rstkatt.png";

            } else if (sleep < 50) {
                animal = "sleepykitten.png";

            } else {
                animal = "katt.png";
            }
        }

    
       const endLife = setInterval(dying, 10000)

        function dying(){
            if (sleep === 0 || stamina === 0 || sult === 0){
                animalLife = Math.max(0, animalLife - 1)
                    if(animalLife <= 0){
                    clearInterval(endLife)
                    gameInfo = "Du drepte katten. </br> (ps. ingen katter ble skadet under produksjonen av dette spillet)"
                    animal = "d√∏dkatt.png"
                    }
                }

            updateView() }

        function drawStats(){

            return `
            Liv igjen: ${animalLife}<br><br>
            <div> T√∏rst: <div class="container">
                     <div class="bar" id="bar" style="width:${stamina}%; background-color:${barstamina};"></div>
                    </div>
                    </div> 

                    
            Sult: <div class="container">
                     <div class="bar" id="bar" style="width:${sult}%; background-color:${barsult};"></div>
                    </div> 
            
            S√∏vn: <div class="container">
                     <div class="bar" id="bar" style="width:${sleep}%; background-color:${barcolor};"></div>
                    </div>  
                     <br>
                 ` 
             }


        function drawButtons(){
            return `
            <div class="buttons"> 
            <button onclick="giveFood()">Gi mat</button>
            <button onclick="giveWater('vann', 10)">Gi vann</button>
            <button onclick="sleepButton()">Sove</button>
            </div>
            `;             
        } 


        // Controller 
        
        function giveFood(){
            
            sult = Math.min(100, sult + 10) 
            gameInfo = `Du ga gotchi en fisk`
            updateView();
        }

        
        function giveWater(water,newStamina) {

            stamina = Math.min(100, stamina + 5)
            gameInfo = `Du ga gotchi litt drikke`
            updateView(); 
        }

        function sleepButton(){
            sleep = Math.min(100, sleep + 5)   
            gameInfo = `Gotchi har sovet`
            updateView();
        }
            
        
         const timer = setInterval(sleepTime,18000)
         const timert√∏rst = setInterval(t√∏rsthet, 3000)
         const timersult = setInterval(hunger, 3000)
        
        
        function sleepTime(){
            sleep = Math.max(0, sleep - 5);
            updateView();
        }
                
        function t√∏rsthet(){   
            stamina = Math.max(0, stamina - 2) ;
            updateView(); 
        }

        function hunger(){
            sult = Math.max(0, sult - 1);
            updateView();
        }

          
    </script>
</body>
</html>